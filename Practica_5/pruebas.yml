---
- hosts: pruebas
  become: true

  tasks:
    - name: Install python pip
      apt:
        name: python3-pip
        state: present
    - name: Install docker-py python module
      pip:
        name: docker-py
        state: present
    - name: log into docker hub registry
      docker_login:
        username: "{{DOCKERHUB_ID}}"
        password: "{{DOKERHUB_PWD}}"
    - name: ensure container is running
      docker_container:
        name: "{{CONTAINER_NAME}}"
        state: started
        image: "{{DOCKERHUB_ID}}/{{IMAGE}}:latest"
        pull: true
        ports:
          - "8081:8081"